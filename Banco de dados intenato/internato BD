--
-- PostgreSQL database dump
--

\restrict LOA5r0dsbcxFHJRIUDex0lC1OEcfTlOgtiSAGosfx1GZwlkS9foANGQIDLFF1F3

-- Dumped from database version 17.6
-- Dumped by pg_dump version 17.6

-- Started on 2025-09-01 15:59:53

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 226 (class 1259 OID 16573)
-- Name: alocacoes; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.alocacoes (
    id_alocacao integer NOT NULL,
    id_aluno integer NOT NULL,
    id_turma integer NOT NULL,
    data_alocacao timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.alocacoes OWNER TO postgres;

--
-- TOC entry 225 (class 1259 OID 16572)
-- Name: alocacoes_id_alocacao_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.alocacoes_id_alocacao_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.alocacoes_id_alocacao_seq OWNER TO postgres;

--
-- TOC entry 4943 (class 0 OID 0)
-- Dependencies: 225
-- Name: alocacoes_id_alocacao_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.alocacoes_id_alocacao_seq OWNED BY public.alocacoes.id_alocacao;


--
-- TOC entry 222 (class 1259 OID 16553)
-- Name: alunos; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.alunos (
    id_aluno integer NOT NULL,
    nome character varying(100) NOT NULL,
    matricula character varying(20) NOT NULL,
    data_nascimento date NOT NULL,
    ativo boolean DEFAULT true,
    criado_em timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.alunos OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 16552)
-- Name: alunos_id_aluno_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.alunos_id_aluno_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.alunos_id_aluno_seq OWNER TO postgres;

--
-- TOC entry 4944 (class 0 OID 0)
-- Dependencies: 221
-- Name: alunos_id_aluno_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.alunos_id_aluno_seq OWNED BY public.alunos.id_aluno;


--
-- TOC entry 230 (class 1259 OID 16604)
-- Name: favoritos; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.favoritos (
    id_favorito integer NOT NULL,
    id_usuario integer,
    descricao character varying(255),
    criado_em timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.favoritos OWNER TO postgres;

--
-- TOC entry 229 (class 1259 OID 16603)
-- Name: favoritos_id_favorito_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.favoritos_id_favorito_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.favoritos_id_favorito_seq OWNER TO postgres;

--
-- TOC entry 4945 (class 0 OID 0)
-- Dependencies: 229
-- Name: favoritos_id_favorito_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.favoritos_id_favorito_seq OWNED BY public.favoritos.id_favorito;


--
-- TOC entry 228 (class 1259 OID 16591)
-- Name: logs; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.logs (
    id_log integer NOT NULL,
    id_usuario integer,
    acao character varying(255) NOT NULL,
    criado_em timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.logs OWNER TO postgres;

--
-- TOC entry 227 (class 1259 OID 16590)
-- Name: logs_id_log_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.logs_id_log_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.logs_id_log_seq OWNER TO postgres;

--
-- TOC entry 4946 (class 0 OID 0)
-- Dependencies: 227
-- Name: logs_id_log_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.logs_id_log_seq OWNED BY public.logs.id_log;


--
-- TOC entry 218 (class 1259 OID 16528)
-- Name: perfis; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.perfis (
    id_perfil integer NOT NULL,
    nome character varying(50) NOT NULL
);


ALTER TABLE public.perfis OWNER TO postgres;

--
-- TOC entry 217 (class 1259 OID 16527)
-- Name: perfis_id_perfil_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.perfis_id_perfil_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.perfis_id_perfil_seq OWNER TO postgres;

--
-- TOC entry 4947 (class 0 OID 0)
-- Dependencies: 217
-- Name: perfis_id_perfil_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.perfis_id_perfil_seq OWNED BY public.perfis.id_perfil;


--
-- TOC entry 232 (class 1259 OID 16717)
-- Name: semestres; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.semestres (
    id integer NOT NULL,
    rotulo character varying(10) NOT NULL,
    data_inicio date NOT NULL,
    data_fim date NOT NULL
);


ALTER TABLE public.semestres OWNER TO postgres;

--
-- TOC entry 231 (class 1259 OID 16716)
-- Name: semestres_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.semestres_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.semestres_id_seq OWNER TO postgres;

--
-- TOC entry 4948 (class 0 OID 0)
-- Dependencies: 231
-- Name: semestres_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.semestres_id_seq OWNED BY public.semestres.id;


--
-- TOC entry 224 (class 1259 OID 16564)
-- Name: turmas; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.turmas (
    id_turma integer NOT NULL,
    nome character varying(50) NOT NULL,
    ano integer NOT NULL,
    ativo boolean DEFAULT true,
    criado_em timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.turmas OWNER TO postgres;

--
-- TOC entry 223 (class 1259 OID 16563)
-- Name: turmas_id_turma_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.turmas_id_turma_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.turmas_id_turma_seq OWNER TO postgres;

--
-- TOC entry 4949 (class 0 OID 0)
-- Dependencies: 223
-- Name: turmas_id_turma_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.turmas_id_turma_seq OWNED BY public.turmas.id_turma;


--
-- TOC entry 220 (class 1259 OID 16537)
-- Name: usuarios; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.usuarios (
    id_usuario integer NOT NULL,
    nome character varying(100) NOT NULL,
    email character varying(100) NOT NULL,
    senha character varying(255) NOT NULL,
    id_perfil integer,
    ativo boolean DEFAULT true,
    criado_em timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.usuarios OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 16536)
-- Name: usuarios_id_usuario_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.usuarios_id_usuario_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.usuarios_id_usuario_seq OWNER TO postgres;

--
-- TOC entry 4950 (class 0 OID 0)
-- Dependencies: 219
-- Name: usuarios_id_usuario_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.usuarios_id_usuario_seq OWNED BY public.usuarios.id_usuario;


--
-- TOC entry 4741 (class 2604 OID 16576)
-- Name: alocacoes id_alocacao; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alocacoes ALTER COLUMN id_alocacao SET DEFAULT nextval('public.alocacoes_id_alocacao_seq'::regclass);


--
-- TOC entry 4735 (class 2604 OID 16556)
-- Name: alunos id_aluno; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alunos ALTER COLUMN id_aluno SET DEFAULT nextval('public.alunos_id_aluno_seq'::regclass);


--
-- TOC entry 4745 (class 2604 OID 16607)
-- Name: favoritos id_favorito; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.favoritos ALTER COLUMN id_favorito SET DEFAULT nextval('public.favoritos_id_favorito_seq'::regclass);


--
-- TOC entry 4743 (class 2604 OID 16594)
-- Name: logs id_log; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.logs ALTER COLUMN id_log SET DEFAULT nextval('public.logs_id_log_seq'::regclass);


--
-- TOC entry 4731 (class 2604 OID 16531)
-- Name: perfis id_perfil; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.perfis ALTER COLUMN id_perfil SET DEFAULT nextval('public.perfis_id_perfil_seq'::regclass);


--
-- TOC entry 4747 (class 2604 OID 16720)
-- Name: semestres id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.semestres ALTER COLUMN id SET DEFAULT nextval('public.semestres_id_seq'::regclass);


--
-- TOC entry 4738 (class 2604 OID 16567)
-- Name: turmas id_turma; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.turmas ALTER COLUMN id_turma SET DEFAULT nextval('public.turmas_id_turma_seq'::regclass);


--
-- TOC entry 4732 (class 2604 OID 16540)
-- Name: usuarios id_usuario; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usuarios ALTER COLUMN id_usuario SET DEFAULT nextval('public.usuarios_id_usuario_seq'::regclass);


--
-- TOC entry 4931 (class 0 OID 16573)
-- Dependencies: 226
-- Data for Name: alocacoes; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.alocacoes (id_alocacao, id_aluno, id_turma, data_alocacao) FROM stdin;
1	1	1	2025-09-01 10:35:41.994013
2	2	2	2025-09-01 10:35:41.994013
\.


--
-- TOC entry 4927 (class 0 OID 16553)
-- Dependencies: 222
-- Data for Name: alunos; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.alunos (id_aluno, nome, matricula, data_nascimento, ativo, criado_em) FROM stdin;
1	João Silva	2025001	2010-05-10	t	2025-09-01 10:35:41.994013
2	Maria Souza	2025002	2010-08-21	t	2025-09-01 10:35:41.994013
\.


--
-- TOC entry 4935 (class 0 OID 16604)
-- Dependencies: 230
-- Data for Name: favoritos; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.favoritos (id_favorito, id_usuario, descricao, criado_em) FROM stdin;
1	3	Turma A	2025-09-01 10:35:41.994013
\.


--
-- TOC entry 4933 (class 0 OID 16591)
-- Dependencies: 228
-- Data for Name: logs; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.logs (id_log, id_usuario, acao, criado_em) FROM stdin;
1	1	Login no sistema	2025-09-01 10:35:41.994013
2	2	Atualizou turma	2025-09-01 10:35:41.994013
\.


--
-- TOC entry 4923 (class 0 OID 16528)
-- Dependencies: 218
-- Data for Name: perfis; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.perfis (id_perfil, nome) FROM stdin;
1	ADMIN
2	PROFESSOR
3	ALUNO
\.


--
-- TOC entry 4937 (class 0 OID 16717)
-- Dependencies: 232
-- Data for Name: semestres; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.semestres (id, rotulo, data_inicio, data_fim) FROM stdin;
\.


--
-- TOC entry 4929 (class 0 OID 16564)
-- Dependencies: 224
-- Data for Name: turmas; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.turmas (id_turma, nome, ano, ativo, criado_em) FROM stdin;
1	Turma A	2025	t	2025-09-01 10:35:41.994013
2	Turma B	2025	t	2025-09-01 10:35:41.994013
\.


--
-- TOC entry 4925 (class 0 OID 16537)
-- Dependencies: 220
-- Data for Name: usuarios; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.usuarios (id_usuario, nome, email, senha, id_perfil, ativo, criado_em) FROM stdin;
1	Administrador	admin@internato.com	senha123	1	t	2025-09-01 10:35:41.994013
2	Professor 1	prof1@internato.com	senha123	2	t	2025-09-01 10:35:41.994013
3	Aluno Teste	aluno1@internato.com	senha123	3	t	2025-09-01 10:35:41.994013
\.


--
-- TOC entry 4951 (class 0 OID 0)
-- Dependencies: 225
-- Name: alocacoes_id_alocacao_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.alocacoes_id_alocacao_seq', 2, true);


--
-- TOC entry 4952 (class 0 OID 0)
-- Dependencies: 221
-- Name: alunos_id_aluno_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.alunos_id_aluno_seq', 2, true);


--
-- TOC entry 4953 (class 0 OID 0)
-- Dependencies: 229
-- Name: favoritos_id_favorito_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.favoritos_id_favorito_seq', 1, true);


--
-- TOC entry 4954 (class 0 OID 0)
-- Dependencies: 227
-- Name: logs_id_log_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.logs_id_log_seq', 2, true);


--
-- TOC entry 4955 (class 0 OID 0)
-- Dependencies: 217
-- Name: perfis_id_perfil_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.perfis_id_perfil_seq', 3, true);


--
-- TOC entry 4956 (class 0 OID 0)
-- Dependencies: 231
-- Name: semestres_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.semestres_id_seq', 1, false);


--
-- TOC entry 4957 (class 0 OID 0)
-- Dependencies: 223
-- Name: turmas_id_turma_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.turmas_id_turma_seq', 2, true);


--
-- TOC entry 4958 (class 0 OID 0)
-- Dependencies: 219
-- Name: usuarios_id_usuario_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.usuarios_id_usuario_seq', 3, true);


--
-- TOC entry 4763 (class 2606 OID 16579)
-- Name: alocacoes alocacoes_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alocacoes
    ADD CONSTRAINT alocacoes_pkey PRIMARY KEY (id_alocacao);


--
-- TOC entry 4757 (class 2606 OID 16562)
-- Name: alunos alunos_matricula_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alunos
    ADD CONSTRAINT alunos_matricula_key UNIQUE (matricula);


--
-- TOC entry 4759 (class 2606 OID 16560)
-- Name: alunos alunos_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alunos
    ADD CONSTRAINT alunos_pkey PRIMARY KEY (id_aluno);


--
-- TOC entry 4767 (class 2606 OID 16610)
-- Name: favoritos favoritos_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.favoritos
    ADD CONSTRAINT favoritos_pkey PRIMARY KEY (id_favorito);


--
-- TOC entry 4765 (class 2606 OID 16597)
-- Name: logs logs_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.logs
    ADD CONSTRAINT logs_pkey PRIMARY KEY (id_log);


--
-- TOC entry 4749 (class 2606 OID 16535)
-- Name: perfis perfis_nome_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.perfis
    ADD CONSTRAINT perfis_nome_key UNIQUE (nome);


--
-- TOC entry 4751 (class 2606 OID 16533)
-- Name: perfis perfis_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.perfis
    ADD CONSTRAINT perfis_pkey PRIMARY KEY (id_perfil);


--
-- TOC entry 4769 (class 2606 OID 16722)
-- Name: semestres semestres_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.semestres
    ADD CONSTRAINT semestres_pkey PRIMARY KEY (id);


--
-- TOC entry 4771 (class 2606 OID 16724)
-- Name: semestres semestres_rotulo_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.semestres
    ADD CONSTRAINT semestres_rotulo_key UNIQUE (rotulo);


--
-- TOC entry 4761 (class 2606 OID 16571)
-- Name: turmas turmas_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.turmas
    ADD CONSTRAINT turmas_pkey PRIMARY KEY (id_turma);


--
-- TOC entry 4753 (class 2606 OID 16546)
-- Name: usuarios usuarios_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usuarios
    ADD CONSTRAINT usuarios_email_key UNIQUE (email);


--
-- TOC entry 4755 (class 2606 OID 16544)
-- Name: usuarios usuarios_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usuarios
    ADD CONSTRAINT usuarios_pkey PRIMARY KEY (id_usuario);


--
-- TOC entry 4773 (class 2606 OID 16580)
-- Name: alocacoes alocacoes_id_aluno_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alocacoes
    ADD CONSTRAINT alocacoes_id_aluno_fkey FOREIGN KEY (id_aluno) REFERENCES public.alunos(id_aluno) ON DELETE CASCADE;


--
-- TOC entry 4774 (class 2606 OID 16585)
-- Name: alocacoes alocacoes_id_turma_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alocacoes
    ADD CONSTRAINT alocacoes_id_turma_fkey FOREIGN KEY (id_turma) REFERENCES public.turmas(id_turma) ON DELETE CASCADE;


--
-- TOC entry 4776 (class 2606 OID 16611)
-- Name: favoritos favoritos_id_usuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.favoritos
    ADD CONSTRAINT favoritos_id_usuario_fkey FOREIGN KEY (id_usuario) REFERENCES public.usuarios(id_usuario) ON DELETE CASCADE;


--
-- TOC entry 4775 (class 2606 OID 16598)
-- Name: logs logs_id_usuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.logs
    ADD CONSTRAINT logs_id_usuario_fkey FOREIGN KEY (id_usuario) REFERENCES public.usuarios(id_usuario) ON DELETE SET NULL;


--
-- TOC entry 4772 (class 2606 OID 16547)
-- Name: usuarios usuarios_id_perfil_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usuarios
    ADD CONSTRAINT usuarios_id_perfil_fkey FOREIGN KEY (id_perfil) REFERENCES public.perfis(id_perfil) ON DELETE SET NULL;


-- Completed on 2025-09-01 15:59:53

--
-- PostgreSQL database dump complete
--

\unrestrict LOA5r0dsbcxFHJRIUDex0lC1OEcfTlOgtiSAGosfx1GZwlkS9foANGQIDLFF1F3

